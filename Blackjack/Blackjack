CLEAROUTPUT

/* CONSTRUYE UN DECK DE CARTAS */
copy 4#1,13 deck
/* print deck */

shuffle deck deck
/* print deck */

/* INICIO DE LA RONDA */

/* cartas del jugador */
take deck (1 3) cartasJug
size cartasJug numCartasJug

/* cartas del dealer */
take deck (2 4) cartasCasa
size cartasCasa numCartasCasa
take cartasCasa 2,numCartasCasa cartasVisCasa

/* final de inicio de la ronda */
remove deck (1 2 3 4) deck
print cartasVisCasa cartasJug cartasCasa deck


/* SUMA LAS CARTAS */

newcmd contar cartas suma       
       copy cartas naipes
       recode naipes between 10 13 10 naipes
       sum naipes sumaTotal

       if (1 memberof naipes) and (sumaTotal + 10)<=21
          suma = sumaTotal + 10
       else
          suma = sumaTotal
       end
end

/* prueba contar */

copy (1 1 2) cartas
contar cartas res
print res

/* ESTRATEGIA DEL JUGADOR */

newcmd cogerCartasJug cartasJug cartaVisCasa respuesta
	contar cartasJug sumaCartas
	/* print sumaCartas */
	
	if cartaVisCasa=1
	/* si es A */
		cartaVisCasa = 11
	else
	/* si son nobles */
		recode cartaVisCasa between 10 13 10 cartaVisCasa
	end

	/* print cartaVisCasa */

	if (sumaCartas >= 04 AND sumaCartas <= 11)
		respuesta = 1
	elseif sumaCartas = 12 AND (cartaVisCasa <= 3 OR cartaVisCasa >= 7)
		respuesta = 1
	elseif (sumaCartas >= 13 AND sumaCartas <= 16) AND cartaVisCasa >= 7
		respuesta = 1
	else 
		respuesta = 0
	end
end

newcmd realizarTurnoJugador cartasIniciales cartasVisCasa deck cartasResultantes
	
	concat cartasIniciales cartasResultantes
	print "Antes :" cartasResultantes
	cogerCartasJug cartasIniciales cartasVisCasa seguirCogiendo
	
	while seguirCogiendo=1
		take deck (1) cartaCogida
		concat cartaCogida cartasResultantes cartasResultantes
		remove deck (1) deck
		cogerCartasJug cartasResultantes cartasVisCasa seguirCogiendo
	end
	
	print "Depues:" cartasResultantes
		
end

/* prueba cogerCartas jugador */


/* 
cogerCartasJug (13.0 1.0 5.0) cartasVisCasa respuesta
print respuesta
*/

/* prueba realizarTurnoJugador */

realizarTurnoJugador cartasJug cartasVisCasa deck cartasResultantes





